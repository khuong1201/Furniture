openapi: 3.0.0
info:
  title: 'Ecommerce API'
  description: 'Tài liệu API cho hệ thống Backend'
  contact:
    email: admin@example.com
  version: 1.0.0
servers:
  -
    url: 'http://localhost'
    description: 'API Server'
paths:
  /api/addresses:
    get:
      tags:
        - Address
      summary: 'Lấy danh sách địa chỉ của tôi'
      operationId: 921fc79b1f8ad342be1d0ffdc85b1c81
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      properties:
                        uuid:
                          type: string
                        full_name:
                          type: string
                        phone:
                          type: string
                        full_address:
                          description: 'Địa chỉ ghép'
                          type: string
                        is_default:
                          type: boolean
                      type: object
                type: object
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Address
      summary: 'Thêm địa chỉ mới'
      operationId: 7682cd97065c015b77c3fd96876af708
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - full_name
                - phone
                - province
                - district
                - ward
                - street
              properties:
                full_name:
                  type: string
                  example: 'Nguyễn Văn A'
                phone:
                  type: string
                  example: '0901234567'
                province:
                  type: string
                  example: 'Hồ Chí Minh'
                district:
                  type: string
                  example: 'Quận 1'
                ward:
                  type: string
                  example: 'Phường Bến Nghé'
                street:
                  type: string
                  example: '123 Lê Lợi'
                is_default:
                  type: boolean
                  default: false
                type:
                  type: string
                  default: home
                  enum:
                    - home
                    - office
              type: object
      responses:
        201:
          description: Created
        400:
          description: 'Limit reached (400033)'
      security:
        -
          bearerAuth: []
  '/api/addresses/{uuid}':
    get:
      tags:
        - Address
      summary: 'Xem chi tiết địa chỉ'
      operationId: 8e8ecf7b85229c52bdf32314ea8fa60f
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Success
        404:
          description: 'Not Found'
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Address
      summary: 'Cập nhật địa chỉ'
      operationId: c1b663988ceed0feab5a2ad950ef51f4
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                full_name:
                  type: string
                is_default:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Address
      summary: 'Xóa địa chỉ'
      operationId: c89e5630baaaa970c7eda6f1e8d719d7
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Deleted
        403:
          description: 'Cannot delete default address (403032)'
      security:
        -
          bearerAuth: []
  /auth/login:
    post:
      tags:
        - Auth
      summary: 'Đăng nhập'
      operationId: 3112494b62ec1e0e762028e958cef77b
      requestBody:
        content:
          application/json:
            schema:
              properties:
                email:
                  type: string
                  example: admin@system.com
                password:
                  type: string
                  example: password
                device_name:
                  type: string
                  example: web
              type: object
      responses:
        200:
          description: OK
        401:
          description: 'Sai thông tin (Code: 401020)'
        423:
          description: 'Bị khóa (Code: 423014)'
  /auth/register:
    post:
      tags:
        - Auth
      summary: 'Đăng ký'
      operationId: ec3aaa6aae353212c6d4173ea25748b2
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
                password_confirmation:
                  type: string
              type: object
      responses:
        201:
          description: Created
        409:
          description: 'Email trùng (Code: 409011)'
  /auth/refresh:
    post:
      tags:
        - Auth
      summary: 'Refresh Token'
      operationId: 54138472c166d1a1f706bb95f3eeddb4
      requestBody:
        content:
          application/json:
            schema:
              properties:
                refresh_token:
                  type: string
                device_name:
                  type: string
              type: object
      responses:
        200:
          description: OK
  /auth/verify-email:
    post:
      tags:
        - Auth
      summary: 'Verify OTP'
      operationId: 55d1c66c65a5999c383bbf9cec79c8f2
      requestBody:
        content:
          application/json:
            schema:
              properties:
                otp:
                  type: string
              type: object
      responses:
        200:
          description: OK
  /auth/resend-verification:
    post:
      tags:
        - Auth
      summary: 'Resend OTP'
      operationId: 2e88740c51b30645f0ccfd4c2f7574d1
      responses:
        200:
          description: OK
  /auth/logout:
    post:
      tags:
        - Auth
      summary: Logout
      operationId: d5ba94626f1419f9a308da15ed09a40e
      responses:
        200:
          description: OK
  /auth/me:
    get:
      tags:
        - Auth
      summary: 'Get Profile'
      operationId: 7e7256de38556bc24ecc0dcf65266aa2
      responses:
        200:
          description: OK
  /carts:
    get:
      tags:
        - Cart
      summary: 'Xem giỏ hàng hiện tại'
      description: 'Lấy thông tin chi tiết giỏ hàng của user đang đăng nhập, bao gồm các item, tổng tiền, và voucher đang áp dụng.'
      operationId: 09c3433b5866644b5e6d84c885aa4f44
      responses:
        200:
          description: 'Lấy dữ liệu thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      cart_uuid:
                        type: string
                        format: uuid
                      items:
                        type: array
                        items:
                          properties:
                            uuid:
                              type: string
                              format: uuid
                            product_name:
                              type: string
                              example: 'iPhone 15 Pro'
                            sku:
                              type: string
                              example: IP15-BLK-256
                            image:
                              type: string
                              format: url
                            options:
                              type: string
                              example: 'Màu: Đen, Dung lượng: 256GB'
                            quantity:
                              type: integer
                              example: 1
                            stock_available:
                              type: integer
                              example: 10
                            is_stock_sufficient:
                              type: boolean
                              example: true
                            price:
                              properties:
                                raw:
                                  type: number
                                  example: 25000000
                                formatted:
                                  type: string
                                  example: '25.000.000 ₫'
                              type: object
                            subtotal:
                              properties:
                                raw:
                                  type: number
                                  example: 25000000
                                formatted:
                                  type: string
                                  example: '25.000.000 ₫'
                              type: object
                          type: object
                      summary:
                        properties:
                          item_count:
                            type: integer
                            example: 3
                          currency:
                            type: string
                            example: VND
                          discount:
                            properties:
                              code:
                                type: string
                                example: SALE50
                                nullable: true
                              amount:
                                type: number
                                example: 50000
                              formatted:
                                type: string
                                example: '50.000 ₫'
                            type: object
                          total:
                            properties:
                              raw:
                                type: number
                                example: 24950000
                              formatted:
                                type: string
                                example: '24.950.000 ₫'
                            type: object
                        type: object
                    type: object
                type: object
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Cart
      summary: 'Thêm sản phẩm vào giỏ'
      description: 'Nếu sản phẩm đã có, sẽ cộng dồn số lượng. Sẽ báo lỗi nếu tồn kho không đủ.'
      operationId: f54d6540bce234d581cf30b75f9cc7f2
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - variant_uuid
                - quantity
              properties:
                variant_uuid:
                  description: 'UUID của biến thể sản phẩm'
                  type: string
                  format: uuid
                quantity:
                  type: integer
                  minimum: 1
                  example: 1
              type: object
      responses:
        200:
          description: 'Thêm thành công (Trả về Cart mới nhất)'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 'Thêm vào giỏ hàng thành công'
                  data:
                    description: 'Cart Object (như API Index)'
                    type: object
                type: object
        409:
          description: 'Hết hàng / Không đủ tồn kho'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: false
                  error_code:
                    description: 'Mã lỗi: Out of stock'
                    type: integer
                    example: 409042
                  message:
                    type: string
                    example: 'Sản phẩm chỉ còn 5 items.'
                type: object
        422:
          description: 'Sản phẩm không tồn tại hoặc ngưng kinh doanh (422043)'
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Cart
      summary: 'Làm trống giỏ hàng (Clear All)'
      operationId: b7f118663b800d671b1d4923c73dfb3f
      responses:
        200:
          description: 'Đã làm trống'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: 'null'
                type: object
      security:
        -
          bearerAuth: []
  '/carts/{itemUuid}':
    put:
      tags:
        - Cart
      summary: 'Cập nhật số lượng item'
      operationId: 3bdd0b23b2e8c4ca46213f04b3504c0d
      parameters:
        -
          name: itemUuid
          in: path
          description: 'UUID của Cart Item (Lấy từ API danh sách giỏ hàng)'
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - quantity
              properties:
                quantity:
                  description: 'Số lượng mới (0 để xóa)'
                  type: integer
                  minimum: 0
                  example: 2
              type: object
      responses:
        200:
          description: 'Cập nhật thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    description: 'Cart Object updated'
                    type: object
                type: object
        409:
          description: 'Số lượng vượt quá tồn kho (409042)'
        404:
          description: 'Không tìm thấy item trong giỏ (404041)'
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Cart
      summary: 'Xóa 1 sản phẩm khỏi giỏ'
      operationId: 45ab191deb38ce425497a4f9a368a8a1
      parameters:
        -
          name: itemUuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: 'Xóa thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    description: 'Cart Object updated'
                    type: object
                type: object
        404:
          description: 'Item not found (404041)'
      security:
        -
          bearerAuth: []
  /carts/bulk-delete:
    post:
      tags:
        - Cart
      summary: 'Xóa nhiều sản phẩm (Checkbox)'
      description: 'Dùng khi user tích chọn nhiều sản phẩm rồi nhấn xóa.'
      operationId: 64956d2c12e37ac53d06de991afd148f
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - uuids
              properties:
                uuids:
                  type: array
                  items:
                    type: string
                    format: uuid
                  example:
                    - uuid-1
                    - uuid-2
              type: object
      responses:
        200:
          description: 'Xóa thành công'
      security:
        -
          bearerAuth: []
  /api/carts/apply-coupon:
    post:
      tags:
        - 'Cart Voucher'
      summary: 'Áp dụng mã giảm giá'
      description: 'Kiểm tra mã voucher và áp dụng vào giỏ hàng hiện tại.'
      operationId: 87fd975e04c2daf99f28cc53d2263c79
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - code
              properties:
                code:
                  description: 'Mã voucher'
                  type: string
                  example: SUMMER2025
              type: object
      responses:
        200:
          description: 'Áp dụng thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    description: 'Object Giỏ hàng mới nhất sau khi giảm giá'
                    type: object
                type: object
        404:
          description: 'Giỏ hàng trống hoặc Không tìm thấy Voucher (404210)'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: false
                  error_code:
                    type: integer
                    example: 404210
                  message:
                    type: string
                    example: 'Voucher not found'
                type: object
        400:
          description: 'Voucher hết hạn hoặc không đủ điều kiện (400211)'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: false
                  error_code:
                    type: integer
                    example: 400211
                  message:
                    type: string
                    example: 'Voucher expired'
                type: object
      security:
        -
          bearerAuth: []
  /api/carts/remove-coupon:
    delete:
      tags:
        - 'Cart Voucher'
      summary: 'Gỡ mã giảm giá'
      operationId: ea7f164d4f94f11516c22aaec8b1605a
      responses:
        200:
          description: 'Gỡ thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    description: 'Giỏ hàng sau khi gỡ voucher'
                    type: object
                type: object
      security:
        -
          bearerAuth: []
  /api/public/categories:
    get:
      tags:
        - Categories
      summary: 'Xem danh sách danh mục (Public)'
      description: 'Hỗ trợ 2 chế độ: Cây phân cấp (Tree) hoặc Danh sách phẳng (Pagination).'
      operationId: 8450966c62f583c937fde17ded5bdde5
      parameters:
        -
          name: tree
          in: query
          description: 'True: Trả về dạng cây (Nested children). False: Trả về dạng phẳng có phân trang.'
          schema:
            type: boolean
        -
          name: page
          in: query
          schema:
            type: integer
            default: 1
        -
          name: per_page
          in: query
          schema:
            type: integer
            default: 15
        -
          name: search
          in: query
          description: 'Tìm theo tên'
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  -
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          properties:
                            uuid:
                              type: string
                            name:
                              type: string
                            children:
                              type: array
                              items:
                                type: object
                          type: object
                    type: object
                  -
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: array
                        items:
                          type: object
                      meta:
                        type: object
                    type: object
  '/api/public/categories/{uuid}':
    get:
      tags:
        - Categories
      summary: 'Chi tiết danh mục'
      operationId: 192c28d129f56d050948571655945a6b
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryResource'
        404:
          description: 'Not Found (404050)'
  /api/admin/categories:
    post:
      tags:
        - Categories
      summary: 'Tạo danh mục (Admin)'
      operationId: 4af25e562ffbd86d10da28d208c5a3a1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
              properties:
                name:
                  type: string
                  example: 'Laptop Gaming'
                slug:
                  description: 'Để trống sẽ tự tạo'
                  type: string
                  example: laptop-gaming
                description:
                  type: string
                parent_id:
                  description: 'ID của danh mục cha'
                  type: integer
                  nullable: true
                is_active:
                  type: boolean
                  default: true
              type: object
      responses:
        201:
          description: Created
        409:
          description: 'Duplicate Slug (409051)'
      security:
        -
          bearerAuth: []
  '/api/admin/categories/{uuid}':
    put:
      tags:
        - Categories
      summary: 'Cập nhật danh mục'
      operationId: 14dd36677f1fa231899a0ba29d73ba3d
      parameters:
        -
          name: uuid
          in: path
          required: true
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                parent_id:
                  type: integer
                  nullable: true
                is_active:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
        422:
          description: 'Lỗi Vòng lặp cha con'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: false
                  error_code:
                    description: 'Circular reference detected'
                    type: integer
                    example: 422052
                  message:
                    type: string
                type: object
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Categories
      summary: 'Xóa danh mục'
      operationId: ee66d3ed6fc34ecf5ea4457664b0794c
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /public/collections:
    get:
      tags:
        - Collections
      summary: 'Lấy danh sách bộ sưu tập (Public)'
      operationId: d466028193674eb65822470aadbc65f3
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
        -
          name: search
          in: query
          schema:
            type: string
      responses:
        200:
          description: Success
  '/public/collections/{uuid}':
    get:
      tags:
        - Collections
      summary: 'Xem chi tiết bộ sưu tập'
      description: 'Trả về thông tin collection và danh sách sản phẩm kèm variant (để lấy giá).'
      operationId: 2b625d099f9641a799646b2dc72f7963
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
  /admin/collections:
    post:
      tags:
        - Collections
      summary: 'Tạo bộ sưu tập (Admin)'
      operationId: ebc20aeba9d988fcb7e9bdea1dbc9b6c
      requestBody:
        content:
          multipart/form-data:
            schema:
              required:
                - name
              properties:
                name:
                  type: string
                slug:
                  type: string
                description:
                  type: string
                banner_image:
                  type: string
                  format: binary
                'product_ids[]':
                  type: array
                  items:
                    type: integer
                is_active:
                  type: boolean
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/admin/collections/{uuid}':
    post:
      tags:
        - Collections
      summary: 'Cập nhật bộ sưu tập (Admin) - Method POST for FormData'
      description: 'Sử dụng POST với _method=PUT để upload file trong form-data'
      operationId: 6b5fb875bdcfda4404063fb3e75d978b
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                _method:
                  type: string
                  example: PUT
                name:
                  type: string
                banner_image:
                  type: string
                  format: binary
                'product_ids[]':
                  type: array
                  items:
                    type: integer
                is_active:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Collections
      summary: 'Xóa bộ sưu tập (Admin)'
      operationId: 417228e9f43d14bfdd4442395eea2f34
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/public/currencies:
    get:
      tags:
        - Currencies
      summary: 'Lấy danh sách tiền tệ hỗ trợ (Public)'
      operationId: 393869c064bd607907c140511e475851
      responses:
        200:
          description: Success
  /api/admin/currencies:
    get:
      tags:
        - Currencies
      summary: 'Quản lý danh sách tiền tệ (Admin)'
      operationId: 65e84e6562a89d35eb6e97e4f7e1195a
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: search
          in: query
          schema:
            type: string
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Currencies
      summary: 'Thêm tiền tệ mới'
      operationId: bd5b8d9fffe919e0ede96d9e19db5fb9
      requestBody:
        content:
          application/json:
            schema:
              required:
                - code
                - name
                - symbol
                - exchange_rate
              properties:
                code:
                  type: string
                  example: USD
                name:
                  type: string
                  example: 'US Dollar'
                symbol:
                  type: string
                  example: $
                exchange_rate:
                  type: number
                  example: 4.0E-5
                is_default:
                  type: boolean
                is_active:
                  type: boolean
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/api/admin/currencies/{uuid}':
    put:
      tags:
        - Currencies
      summary: 'Cập nhật tiền tệ'
      operationId: 4db638cfc83eb7ce637d65c14e2ea86d
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Currencies
      summary: 'Xóa tiền tệ'
      operationId: 0489e350f9ccf912b37a464b12a9cf95
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Deleted
        409:
          description: 'Cannot delete default currency (Code: 409071)'
      security:
        -
          bearerAuth: []
  /api/admin/dashboard/summary:
    get:
      tags:
        - Dashboard
      summary: 'Lấy toàn bộ dữ liệu Dashboard'
      description: 'Trả về Cards, Revenue Chart, Customer Chart, Top Spenders, Best Sellers.'
      operationId: 146f12f0632feaa05db6583e632f40f9
      parameters:
        -
          name: period
          in: query
          description: 'Khoảng thời gian xem biểu đồ doanh thu'
          schema:
            type: string
            default: week
            enum:
              - week
              - year
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      cards:
                        properties:
                          total_revenue:
                            type: number
                          revenue_growth:
                            type: number
                          total_orders:
                            type: integer
                          total_users:
                            type: integer
                          low_stock_variants:
                            type: integer
                        type: object
                      revenue_chart:
                        type: array
                        items:
                          properties:
                            date:
                              type: string
                            label:
                              type: string
                            value:
                              type: number
                          type: object
                      customer_stats:
                        type: object
                      top_spenders:
                        type: array
                        items: []
                      best_sellers:
                        type: array
                        items: []
                    type: object
                type: object
        403:
          description: Forbidden
        500:
          description: 'Query Failed (500080)'
      security:
        -
          bearerAuth: []
  /api/admin/inventories:
    get:
      tags:
        - Inventory
      summary: 'Xem danh sách tồn kho'
      operationId: e04586388c656a5a7c3458faa19fe18a
      parameters:
        -
          name: warehouse_uuid
          in: query
          schema:
            type: string
            format: uuid
        -
          name: search
          in: query
          description: 'Tìm tên SP hoặc SKU'
          schema:
            type: string
        -
          name: page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
  /api/admin/inventories/adjust:
    post:
      tags:
        - Inventory
      summary: 'Điều chỉnh kho (Nhập/Xuất)'
      description: 'Cộng hoặc trừ số lượng hiện tại.'
      operationId: ec8f46ce3b90acb20c0f3e6df61bc449
      requestBody:
        content:
          application/json:
            schema:
              properties:
                variant_uuid:
                  type: string
                warehouse_uuid:
                  type: string
                quantity:
                  description: 'Số dương để nhập, âm để xuất'
                  type: integer
                reason:
                  type: string
              type: object
      responses:
        200:
          description: Adjusted
        400:
          description: 'Invalid Quantity (400092)'
      security:
        -
          bearerAuth: []
  /api/admin/inventories/upsert:
    post:
      tags:
        - Inventory
      summary: 'Set cứng tồn kho (Kiểm kê)'
      description: 'Ghi đè số lượng tồn kho (dùng khi kiểm kê).'
      operationId: a5acdd4ca0d56b5aa8d906254d1ec116
      requestBody:
        content:
          application/json:
            schema:
              properties:
                variant_uuid:
                  type: string
                warehouse_uuid:
                  type: string
                quantity:
                  type: integer
                min_threshold:
                  type: integer
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
  /api/admin/logs:
    get:
      tags:
        - 'System Logs'
      summary: 'Lấy danh sách Logs (Có lọc & Phân trang)'
      operationId: 6424099714c1907298570e95556d0374
      parameters:
        -
          name: page
          in: query
          description: 'Số trang hiện tại'
          schema:
            type: integer
            default: 1
        -
          name: per_page
          in: query
          description: 'Số lượng bản ghi mỗi trang'
          schema:
            type: integer
            default: 20
        -
          name: type
          in: query
          description: 'Loại log (audit, system_error)'
          schema:
            type: string
            enum:
              - audit
              - system_error
        -
          name: action
          in: query
          description: 'Hành động (created, updated, deleted, exception...)'
          schema:
            type: string
        -
          name: user_id
          in: query
          description: 'ID người dùng thực hiện'
          schema:
            type: integer
        -
          name: model
          in: query
          description: 'Tên Model (VD: App\Models\Product)'
          schema:
            type: string
        -
          name: model_uuid
          in: query
          description: 'UUID của đối tượng bị tác động'
          schema:
            type: string
            format: uuid
        -
          name: date_from
          in: query
          description: 'Lọc từ ngày (YYYY-MM-DD)'
          schema:
            type: string
            format: date
        -
          name: date_to
          in: query
          description: 'Lọc đến ngày (YYYY-MM-DD)'
          schema:
            type: string
            format: date
      responses:
        200:
          description: 'Thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Success
                  data:
                    type: array
                    items:
                      properties:
                        id:
                          type: integer
                        uuid:
                          type: string
                          format: uuid
                        type:
                          type: string
                        action:
                          type: string
                        message:
                          type: string
                        created_at:
                          type: string
                          format: date-time
                      type: object
                  meta:
                    properties:
                      current_page:
                        type: integer
                      total:
                        type: integer
                      per_page:
                        type: integer
                    type: object
                type: object
        401:
          description: 'Chưa đăng nhập'
        403:
          description: 'Không có quyền truy cập'
      security:
        -
          bearerAuth: []
  '/api/admin/logs/{uuid}':
    get:
      tags:
        - 'System Logs'
      summary: 'Xem chi tiết một Log'
      operationId: 40f01b2d4aa06cc629a8e461679ef1e9
      parameters:
        -
          name: uuid
          in: path
          description: 'UUID của Log'
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: 'Thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      id:
                        type: integer
                      uuid:
                        type: string
                      message:
                        type: string
                      metadata:
                        description: 'Chi tiết thay đổi hoặc lỗi'
                        type: object
                      ip_address:
                        type: string
                    type: object
                type: object
        404:
          description: 'Không tìm thấy Log'
      security:
        -
          bearerAuth: []
  /api/admin/media:
    post:
      tags:
        - Media
      summary: 'Upload file'
      description: 'Upload file gắn vào User hiện tại (Mặc định).'
      operationId: fe2aae5ec91e534153cbd639186870f3
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                file:
                  type: string
                  format: binary
                collection:
                  type: string
                  default: default
              type: object
      responses:
        200:
          description: 'Upload thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                type: object
      security:
        -
          bearerAuth: []
  '/api/admin/media/{uuid}':
    delete:
      tags:
        - Media
      summary: 'Xóa file/ảnh'
      operationId: d4a7d71b181a083371709171996313ab
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/notifications:
    get:
      tags:
        - Notifications
      summary: 'Lấy danh sách thông báo'
      operationId: 17461e0bd5c21ee62eecdc88225b888f
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items: []
                  meta:
                    properties:
                      unread_count:
                        type: integer
                        example: 5
                    type: object
                type: object
      security:
        -
          bearerAuth: []
  '/api/notifications/{uuid}/read':
    patch:
      tags:
        - Notifications
      summary: 'Đánh dấu đã đọc 1 thông báo'
      operationId: a570917df37eb9b3229e87c955ba6b51
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
  /api/notifications/read-all:
    post:
      tags:
        - Notifications
      summary: 'Đánh dấu đã đọc tất cả'
      operationId: d52b60af4a1e5d3a21faf3be04b62adf
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
  '/api/notifications/{uuid}':
    delete:
      tags:
        - Notifications
      summary: 'Xóa thông báo'
      operationId: dd0142e3f4675efeebc74854b745b83b
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/orders/checkout:
    post:
      tags:
        - Orders
      summary: 'Đặt hàng từ giỏ (Checkout)'
      description: 'Tạo đơn hàng từ các sản phẩm trong giỏ. Hệ thống sẽ tự động trừ kho và tính voucher.'
      operationId: c4e7f6d39c6eff1bdfc81f16e4a9c503
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - address_id
              properties:
                address_id:
                  description: 'ID địa chỉ giao hàng'
                  type: integer
                  example: 1
                notes:
                  type: string
                  example: 'Giao giờ hành chính'
                  nullable: true
                selected_item_uuids:
                  description: 'Chỉ thanh toán các item này. Nếu null/rỗng -> Thanh toán hết.'
                  type: array
                  items:
                    type: string
                    format: uuid
              type: object
      responses:
        201:
          description: 'Đặt hàng thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/OrderResource'
                type: object
        422:
          description: 'Giỏ hàng trống (422131)'
        409:
          description: 'Hết hàng (409091)'
      security:
        -
          bearerAuth: []
  /api/orders/buy-now:
    post:
      tags:
        - Orders
      summary: 'Mua ngay (Buy Now)'
      description: 'Tạo đơn nhanh cho 1 sản phẩm, bỏ qua giỏ hàng.'
      operationId: 60a135147a73f64a453a20c88577080e
      requestBody:
        content:
          application/json:
            schema:
              properties:
                variant_uuid:
                  type: string
                  format: uuid
                quantity:
                  type: integer
                  example: 1
                address_id:
                  type: integer
                voucher_code:
                  type: string
                  nullable: true
                notes:
                  type: string
              type: object
      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderResource'
      security:
        -
          bearerAuth: []
  '/api/orders/{uuid}/cancel':
    post:
      tags:
        - Orders
      summary: 'Hủy đơn hàng'
      operationId: e199946d43e9ad9e02711a0e26e0b5ec
      parameters:
        -
          name: uuid
          in: path
          required: true
      responses:
        200:
          description: Cancelled
        409:
          description: 'Không thể hủy (409132)'
      security:
        -
          bearerAuth: []
  /api/orders:
    get:
      tags:
        - Orders
      summary: 'Danh sách đơn hàng'
      operationId: 6042ab9e22d46627475a39b3c2d59026
      responses:
        200:
          description: OK
  '/api/orders/{uuid}':
    get:
      tags:
        - Orders
      summary: 'Chi tiết đơn hàng'
      operationId: 7b26acb8a7e1032a51b84fff4db777c3
      responses:
        200:
          description: OK
  /api/payments:
    post:
      tags:
        - Payments
      summary: 'Tạo thanh toán'
      description: 'Khởi tạo giao dịch thanh toán cho đơn hàng. Nếu phương thức là Online (Momo, VNPay), sẽ trả về `redirect_url`.'
      operationId: 48a1c47c9416060f495f50aeb291f99a
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - order_uuid
                - method
              properties:
                order_uuid:
                  type: string
                  format: uuid
                method:
                  type: string
                  enum:
                    - cod
                    - momo
                    - vnpay
              type: object
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      payment_uuid:
                        type: string
                      redirect_url:
                        description: 'Link thanh toán (null nếu là COD)'
                        type: string
                        nullable: true
                      is_cod:
                        type: boolean
                    type: object
                type: object
        409:
          description: 'Order already paid (409143)'
        400:
          description: 'Method not supported (400141)'
      security:
        -
          bearerAuth: []
  '/api/payments/callback/{provider}':
    post:
      tags:
        - Payments
      summary: 'Webhook nhận kết quả (IPN)'
      description: 'API này dành cho Cổng thanh toán gọi (Server-to-Server). Không dùng Auth.'
      operationId: 59794136c39e6130786e617d07c9f02a
      parameters:
        -
          name: provider
          in: path
          schema:
            type: string
            enum:
              - momo
              - vnpay
      responses:
        204:
          description: Processed
        400:
          description: 'Invalid Signature'
  '/api/payments/{uuid}':
    get:
      tags:
        - Payments
      summary: 'Chi tiết giao dịch'
      operationId: 06379bada7088ee24ae33048ebcf0963
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
  /api/admin/permissions:
    get:
      tags:
        - Permissions
      summary: 'Danh sách Permissions'
      operationId: 43c786e94121ec50947149c40b23ce6d
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: search
          in: query
          description: 'Tìm theo tên/module'
          schema:
            type: string
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Permissions
      summary: 'Tạo Permission'
      operationId: fed076f2b07976d7f84edf1787d42a92
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                  example: product.view
                description:
                  type: string
                module:
                  type: string
                  example: product
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/api/admin/permissions/{uuid}':
    get:
      tags:
        - Permissions
      summary: 'Chi tiết Permission'
      operationId: 0ab4662c7cdaf15a743d23c55c23af5b
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Permissions
      summary: 'Cập nhật Permission'
      operationId: b695830e31308d1b57375d46d4149fee
      parameters:
        -
          name: uuid
          in: path
          required: true
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Permissions
      summary: 'Xóa Permission'
      operationId: 60d88baba6c5bbe0545da3b58e66f1b4
      parameters:
        -
          name: uuid
          in: path
          required: true
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/admin/my-permissions:
    get:
      tags:
        - Permissions
      summary: 'Lấy danh sách quyền của user đang login'
      operationId: f64aa80db585fddfd806c8633b42080a
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
  /api/admin/attributes:
    get:
      tags:
        - 'Product Attributes'
      summary: 'Lấy danh sách thuộc tính'
      operationId: 7c2510d8ebc7a3995a3665ec3953d947
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
            default: 1
        -
          name: per_page
          in: query
          schema:
            type: integer
            default: 15
        -
          name: search
          in: query
          description: 'Tìm theo tên (VD: Color)'
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      properties:
                        uuid:
                          type: string
                        name:
                          type: string
                        values:
                          type: array
                          items:
                            type: object
                      type: object
                  meta:
                    type: object
                type: object
      security:
        -
          bearerAuth: []
    post:
      tags:
        - 'Product Attributes'
      summary: 'Tạo thuộc tính mới'
      operationId: fbe94290d611d7012bb7cd331861398d
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - type
              properties:
                name:
                  type: string
                  example: 'Kích thước'
                slug:
                  type: string
                  example: size
                type:
                  type: string
                  default: select
                  enum:
                    - text
                    - select
                    - color
                values:
                  description: 'Danh sách giá trị con'
                  type: array
                  items:
                    properties:
                      value:
                        type: string
                        example: XL
                      code:
                        description: 'Mã code hoặc mã màu HEX'
                        type: string
                        example: SIZE_XL
                    type: object
              type: object
      responses:
        201:
          description: Created
        409:
          description: 'Duplicate Slug (409163)'
      security:
        -
          bearerAuth: []
  '/api/admin/attributes/{uuid}':
    get:
      tags:
        - 'Product Attributes'
      summary: 'Chi tiết thuộc tính'
      operationId: 4cbe507e4908d058b8a7c537ce286ecf
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
    put:
      tags:
        - 'Product Attributes'
      summary: 'Cập nhật thuộc tính'
      description: "Lưu ý: Mảng 'values' sẽ thay thế hoàn toàn các giá trị cũ."
      operationId: 5a10d0c96eacc7e52b6f595af566b1e4
      parameters:
        -
          name: uuid
          in: path
          required: true
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                values:
                  type: array
                  items:
                    type: object
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - 'Product Attributes'
      summary: 'Xóa thuộc tính'
      operationId: 9bb9189c8c8d0105be743f54188182b4
      parameters:
        -
          name: uuid
          in: path
          required: true
      responses:
        200:
          description: Deleted
        409:
          description: 'Đang được sử dụng bởi sản phẩm'
      security:
        -
          bearerAuth: []
  /api/public/products:
    get:
      tags:
        - Products
      summary: 'Danh sách sản phẩm (Public)'
      description: 'API dành cho trang chủ/trang danh sách. Chỉ trả về sản phẩm đang Active.'
      operationId: a6a4d3f8b1d74fb1a726b2d52b819ad9
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
            default: 1
        -
          name: per_page
          in: query
          schema:
            type: integer
            default: 15
        -
          name: search
          in: query
          description: 'Tìm theo tên hoặc SKU'
          schema:
            type: string
        -
          name: category_uuid
          in: query
          description: 'Lọc theo danh mục'
          schema:
            type: string
            format: uuid
        -
          name: price_min
          in: query
          description: 'Giá sàn (VND)'
          schema:
            type: integer
        -
          name: price_max
          in: query
          description: 'Giá trần (VND)'
          schema:
            type: integer
        -
          name: is_flash_sale
          in: query
          description: 'True: Chỉ lấy sản phẩm đang giảm giá'
          schema:
            type: boolean
        -
          name: sort_by
          in: query
          description: 'Sắp xếp'
          schema:
            type: string
            enum:
              - latest
              - price_asc
              - price_desc
              - best_selling
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ProductResource'
                  meta:
                    type: object
                type: object
  /api/admin/products:
    get:
      tags:
        - Products
      summary: 'Danh sách sản phẩm (Admin)'
      description: 'Dành cho CMS. Lấy cả sản phẩm ẩn/hiện.'
      operationId: 62841a7496b97cd1744354ef83e0dfc1
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: search
          in: query
          schema:
            type: string
        -
          name: is_active
          in: query
          description: 'Lọc trạng thái ẩn hiện'
          schema:
            type: boolean
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Products
      summary: 'Tạo sản phẩm mới'
      description: 'Hỗ trợ tạo sản phẩm đơn hoặc biến thể. Nếu có biến thể, giá và SKU ở root sẽ bị ignore.'
      operationId: 4576ba76ad96c7ed35c145828146efc1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - category_uuid
              properties:
                name:
                  type: string
                  example: 'Áo Thun Polo'
                category_uuid:
                  type: string
                  format: uuid
                description:
                  type: string
                has_variants:
                  type: boolean
                  default: false
                is_active:
                  type: boolean
                  default: true
                price:
                  description: 'Bắt buộc nếu has_variants=false'
                  type: integer
                sku:
                  description: 'Bắt buộc nếu has_variants=false'
                  type: string
                variants:
                  description: 'Bắt buộc nếu has_variants=true'
                  type: array
                  items:
                    properties:
                      sku:
                        type: string
                        example: POLO-RED-XL
                      price:
                        type: integer
                        example: 150000
                      stock:
                        type: array
                        items:
                          properties:
                            warehouse_uuid:
                              type: string
                            quantity:
                              type: integer
                          type: object
                      attributes:
                        type: array
                        items:
                          properties:
                            attribute_slug:
                              type: string
                              example: color
                            value:
                              type: string
                              example: Red
                          type: object
                    type: object
              type: object
      responses:
        201:
          description: 'Product Created'
        422:
          description: 'Validation Error (Duplicate SKU, Invalid Attribute)'
      security:
        -
          bearerAuth: []
  '/api/public/products/{uuid}':
    get:
      tags:
        - Products
      summary: 'Chi tiết sản phẩm'
      operationId: 3a0bd66d81f934216b55b2a5a1edc3de
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductResource'
        404:
          description: 'Product Not Found (404160)'
  '/api/admin/products/{uuid}':
    put:
      tags:
        - Products
      summary: 'Cập nhật sản phẩm'
      operationId: 9d171256b886572bae2b143aa65b0b51
      parameters:
        -
          name: uuid
          in: path
          required: true
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                price:
                  description: 'Chỉ update được giá nếu là SP đơn'
                  type: integer
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Products
      summary: 'Xóa sản phẩm (Soft Delete)'
      operationId: ede9113fb7b2dfdf530ee4d0676a3cc4
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  '/api/admin/products/{uuid}/images':
    post:
      tags:
        - 'Product Images'
      summary: 'Upload thêm ảnh cho sản phẩm'
      description: 'Upload file ảnh (jpg, png, webp). Max 5MB.'
      operationId: eee71f8f7e2a28baf36d348f887a58b7
      parameters:
        -
          name: uuid
          in: path
          description: 'UUID Sản phẩm'
          required: true
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              required:
                - image
              properties:
                image:
                  description: 'File ảnh upload'
                  type: string
                  format: binary
                is_primary:
                  description: 'Nếu true, ảnh này sẽ thành ảnh đại diện chính'
                  type: boolean
                  default: false
              type: object
      responses:
        201:
          description: 'Upload thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      image_url:
                        type: string
                      is_primary:
                        type: boolean
                    type: object
                type: object
        502:
          description: 'Lỗi Upload Cloud (500112)'
      security:
        -
          bearerAuth: []
  '/api/admin/product-images/{uuid}':
    delete:
      tags:
        - 'Product Images'
      summary: 'Xóa ảnh sản phẩm'
      operationId: bd5fbec252a66b49855b2a053227b436
      parameters:
        -
          name: uuid
          in: path
          description: 'UUID của Ảnh (ProductImage)'
          required: true
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /admin/promotions:
    get:
      tags:
        - Promotions
      summary: 'Lấy danh sách khuyến mãi'
      operationId: 815501f4796ccd641aaf926b1f9bdaa4
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
        -
          name: search
          in: query
          schema:
            type: string
        -
          name: is_active
          in: query
          schema:
            type: boolean
        -
          name: valid_now
          in: query
          schema:
            description: 'Chỉ lấy khuyến mãi đang chạy'
            type: boolean
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Promotions
      summary: 'Tạo mới khuyến mãi'
      operationId: 8280d34b6047f93dd7aefad48126a922
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - type
                - value
                - start_date
                - end_date
              properties:
                name:
                  type: string
                  example: 'Flash Sale 11/11'
                type:
                  type: string
                  enum:
                    - percentage
                    - fixed
                value:
                  description: '10% hoặc 50000 VND'
                  type: integer
                  example: 10
                start_date:
                  type: string
                  format: date-time
                end_date:
                  type: string
                  format: date-time
                product_ids:
                  type: array
                  items:
                    type: integer
                is_active:
                  type: boolean
                  default: true
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/admin/promotions/{uuid}':
    get:
      tags:
        - Promotions
      summary: 'Xem chi tiết khuyến mãi'
      operationId: 90f53a56a3e227f3c48e96cfebcc29ed
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Promotions
      summary: 'Cập nhật khuyến mãi'
      operationId: bad7f0f192a9b0095bc1390f390d90a6
      requestBody:
        content:
          application/json:
            schema:
              properties: []
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Promotions
      summary: 'Xóa khuyến mãi'
      operationId: 2103693e1ba3059dba187ed87a4db80a
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/public/reviews:
    get:
      tags:
        - Reviews
      summary: 'Xem đánh giá (Public)'
      description: 'Lấy danh sách đánh giá của một sản phẩm. Chỉ trả về đánh giá đã được duyệt.'
      operationId: a9d02afafe124b1df44f0cc0859882df
      parameters:
        -
          name: product_uuid
          in: query
          required: true
          schema:
            type: string
            format: uuid
        -
          name: rating
          in: query
          description: 'Lọc theo số sao (1-5)'
          schema:
            type: integer
            enum:
              - 1
              - 2
              - 3
              - 4
              - 5
        -
          name: has_image
          in: query
          description: 'Chỉ lấy review có ảnh'
          schema:
            type: boolean
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
            default: 10
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      properties:
                        uuid:
                          type: string
                        rating:
                          type: integer
                          example: 5
                        comment:
                          type: string
                        images:
                          type: array
                          items:
                            type: string
                        is_verified_purchase:
                          type: boolean
                        user:
                          properties:
                            name:
                              type: string
                            avatar:
                              type: string
                          type: object
                        created_at:
                          type: string
                      type: object
                  meta:
                    type: object
                type: object
  /api/public/reviews/stats:
    get:
      tags:
        - Reviews
      summary: 'Thống kê sao (Stats)'
      description: 'Trả về số lượng đánh giá, điểm trung bình và phân bố sao (5 sao bao nhiêu người, 4 sao bao nhiêu...).'
      operationId: 36edded42da7574b827681dfce13b5d6
      parameters:
        -
          name: product_uuid
          in: query
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      total_reviews:
                        type: integer
                        example: 100
                      average_rating:
                        type: number
                        example: 4.5
                      distribution:
                        type: array
                        items:
                          properties:
                            star:
                              type: integer
                              example: 5
                            count:
                              type: integer
                              example: 80
                            percent:
                              type: number
                              example: 80
                          type: object
                    type: object
                type: object
  /api/reviews:
    post:
      tags:
        - Reviews
      summary: 'Gửi đánh giá mới'
      operationId: d68b33f500e046610086dd7aa532b4a5
      requestBody:
        content:
          application/json:
            schema:
              required:
                - product_uuid
                - rating
              properties:
                product_uuid:
                  type: string
                  format: uuid
                rating:
                  type: integer
                  maximum: 5
                  minimum: 1
                comment:
                  type: string
                images:
                  type: array
                  items:
                    type: string
                    format: url
              type: object
      responses:
        201:
          description: Created
        409:
          description: 'Already reviewed (409181)'
        422:
          description: 'Validation Error'
      security:
        -
          bearerAuth: []
  /api/admin/reviews:
    get:
      tags:
        - Reviews
      summary: 'Quản lý đánh giá (Admin)'
      description: 'Xem tất cả đánh giá bao gồm cả chưa duyệt.'
      operationId: 33f97329712fcae3f161dc4e79f949fa
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: is_approved
          in: query
          schema:
            type: boolean
        -
          name: rating
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
  '/api/public/reviews/{uuid}':
    get:
      tags:
        - Reviews
      summary: 'Chi tiết đánh giá'
      operationId: 89d493cf0255c74effea41382de7f4ea
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Success
  '/api/admin/reviews/{uuid}':
    put:
      tags:
        - Reviews
      summary: 'Duyệt/Sửa đánh giá'
      operationId: 9fd8c9504c10e4361afe46a58c2edcbf
      parameters:
        -
          name: uuid
          in: path
          required: true
      requestBody:
        content:
          application/json:
            schema:
              properties:
                is_approved:
                  description: 'Duyệt hoặc Ẩn bài'
                  type: boolean
                comment:
                  description: 'Admin có thể sửa nội dung nếu vi phạm'
                  type: string
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Reviews
      summary: 'Xóa đánh giá'
      operationId: 7c7f28e74e31847275b80487f8e6ad99
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/admin/roles:
    get:
      tags:
        - Roles
      summary: 'Danh sách Roles'
      operationId: d54fb5d1be14922565143503468bc170
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: q
          in: query
          description: 'Tìm theo tên'
          schema:
            type: string
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Roles
      summary: 'Tạo Role mới'
      operationId: 3ed5e2383fc666470b43da1570ed7644
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                  example: Manager
                description:
                  type: string
                priority:
                  type: integer
                  default: 0
              type: object
      responses:
        201:
          description: Created
        409:
          description: 'Duplicate Name (Code: 409191)'
      security:
        -
          bearerAuth: []
  '/api/admin/roles/{uuid}':
    get:
      tags:
        - Roles
      summary: 'Chi tiết Role'
      operationId: 5a593c0b98b62879d99c8c39c0e8771d
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Roles
      summary: 'Cập nhật Role'
      operationId: a8f057dfc3818d27f9db78385d31b0ff
      parameters:
        -
          name: uuid
          in: path
          required: true
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Roles
      summary: 'Xóa Role'
      operationId: 02af26fbf6168be826350dd3319b644f
      parameters:
        -
          name: uuid
          in: path
          required: true
      responses:
        200:
          description: Deleted
        403:
          description: 'System Role (Code: 403192)'
      security:
        -
          bearerAuth: []
  /api/admin/shippings:
    get:
      tags:
        - Shipping
      summary: 'Xem danh sách vận đơn'
      description: 'Lấy danh sách các đơn vận chuyển, hỗ trợ lọc theo mã vận đơn, mã đơn hàng.'
      operationId: 7bbf97d753810dbb0cf99154ca58ab0c
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
        -
          name: tracking_number
          in: query
          description: 'Mã vận đơn'
          schema:
            type: string
        -
          name: order_uuid
          in: query
          description: 'UUID Đơn hàng'
          schema:
            type: string
            format: uuid
        -
          name: status
          in: query
          schema:
            type: string
            enum:
              - pending
              - shipped
              - delivered
              - returned
              - cancelled
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      properties:
                        uuid:
                          type: string
                        provider:
                          type: string
                        tracking_number:
                          type: string
                        status:
                          type: string
                        order:
                          description: 'Thông tin User của đơn hàng'
                          type: object
                      type: object
                  meta:
                    type: object
                type: object
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Shipping
      summary: 'Tạo vận đơn mới (Giao hàng)'
      description: "Tạo record shipping và cập nhật trạng thái đơn hàng sang 'Shipped'."
      operationId: cbe664808899b808421d342d52a1c8ad
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - order_uuid
                - provider
                - tracking_number
              properties:
                order_uuid:
                  type: string
                  format: uuid
                  example: uuid-order-123
                provider:
                  description: 'Đơn vị vận chuyển'
                  type: string
                  example: GHTK
                tracking_number:
                  description: 'Mã vận đơn'
                  type: string
                  example: S123456789
                fee:
                  description: 'Phí ship thực tế (nếu có)'
                  type: number
                  example: 35000
                  nullable: true
              type: object
      responses:
        201:
          description: Created
        409:
          description: 'Tracking number exists (409201)'
        422:
          description: 'Invalid Order Status (422202)'
      security:
        -
          bearerAuth: []
  '/api/admin/shippings/{uuid}':
    get:
      tags:
        - Shipping
      summary: 'Xem chi tiết vận đơn'
      operationId: 17cf2194cebcb7d2cb8c19b8db83b6f4
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
        404:
          description: 'Not Found (404200)'
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Shipping
      summary: 'Cập nhật trạng thái vận chuyển'
      description: 'Khi update status (VD: delivered), hệ thống sẽ tự động update status của Order.'
      operationId: 84d1440b608989d9ca5669fba8d64a5c
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                status:
                  type: string
                  enum:
                    - shipped
                    - delivered
                    - returned
                    - cancelled
                tracking_number:
                  type: string
                provider:
                  type: string
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Shipping
      summary: 'Xóa vận đơn'
      operationId: 1270a175328f253b3b99fa6c0eacf4bd
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/admin/users:
    get:
      tags:
        - Users
      summary: 'Xem danh sách'
      operationId: f7bde5c5f39fa5557352fc347ce0dce1
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: q
          in: query
          description: 'Search keyword'
          schema:
            type: string
        -
          name: is_active
          in: query
          schema:
            type: boolean
        -
          name: role_id
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
    post:
      tags:
        - Users
      summary: 'Tạo người dùng'
      operationId: f65fbd5be1a9dd04fcbc85c2530fa369
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
                role_id:
                  type: integer
              type: object
      responses:
        201:
          description: Created
  '/api/admin/users/{uuid}':
    get:
      tags:
        - Users
      summary: 'Xem chi tiết'
      operationId: cb857c4064c3e9b9b95cea5262f2023f
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Success
    put:
      tags:
        - Users
      summary: 'Cập nhật Admin'
      operationId: 6ebead6cb49f2b2a1d9d4f8482136e69
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                is_active:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
    delete:
      tags:
        - Users
      summary: 'Xóa người dùng'
      operationId: fe9d83513b1a069ea3b91ad221e7ec69
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Deleted
  /api/profile:
    get:
      tags:
        - Users
      summary: 'Thông tin cá nhân'
      operationId: e65ceda54bc158cbc32918d7fc5a3fde
      responses:
        200:
          description: Success
    put:
      tags:
        - Users
      summary: 'Cập nhật hồ sơ cá nhân'
      operationId: 2c4834f6de22866d5c5b1ec9e3a4c652
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                phone:
                  type: string
              type: object
      responses:
        200:
          description: Updated
  /api/auth/change-password:
    post:
      tags:
        - Users
      summary: 'Đổi mật khẩu'
      operationId: 3a80eface8039f7801eaf80caf01151c
      requestBody:
        content:
          application/json:
            schema:
              properties:
                current_password:
                  type: string
                password:
                  type: string
                password_confirmation:
                  type: string
              type: object
      responses:
        200:
          description: 'Password Changed'
  /api/admin/vouchers:
    get:
      tags:
        - Vouchers
      summary: 'Danh sách Voucher'
      operationId: 00e8ceb211a3c00801f89a5f40793055
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: search
          in: query
          description: 'Tìm theo code hoặc tên'
          schema:
            type: string
        -
          name: is_active
          in: query
          schema:
            type: boolean
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Vouchers
      summary: 'Tạo Voucher'
      operationId: 14fcea8d7c43fda0e329cbf6e10672ae
      requestBody:
        content:
          application/json:
            schema:
              required:
                - code
                - value
                - type
                - name
                - quantity
              properties:
                code:
                  type: string
                  example: SALE50
                name:
                  type: string
                  example: 'Giảm 50%'
                type:
                  type: string
                  enum:
                    - fixed
                    - percentage
                value:
                  type: number
                  example: 50
                quantity:
                  type: integer
                  example: 100
                min_order_value:
                  type: number
                  example: 200000
                max_discount_amount:
                  type: number
                  example: 50000
                limit_per_user:
                  type: integer
                  default: 1
                start_date:
                  type: string
                  format: date-time
                end_date:
                  type: string
                  format: date-time
                is_active:
                  type: boolean
                  default: true
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/api/admin/vouchers/{uuid}':
    get:
      tags:
        - Vouchers
      summary: 'Chi tiết Voucher'
      operationId: 68dc97da6a3c2ceff1237ac4c8e02882
      responses:
        200:
          description: OK
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Vouchers
      summary: 'Cập nhật Voucher'
      operationId: 7c9b9a75505451c65a700b60cae2ffa3
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                quantity:
                  type: integer
                is_active:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Vouchers
      summary: 'Xóa Voucher'
      operationId: 28eaefdda9fd1d977391db4a8de63f28
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /api/admin/warehouses:
    get:
      tags:
        - Warehouses
      summary: 'Xem danh sách Kho hàng'
      description: 'Trả về danh sách kho có phân trang, hỗ trợ tìm kiếm và lọc.'
      operationId: e038360bda6847c820c9adac6fe78c0a
      parameters:
        -
          name: page
          in: query
          description: 'Trang hiện tại'
          schema:
            type: integer
            default: 1
        -
          name: per_page
          in: query
          description: 'Số record mỗi trang'
          schema:
            type: integer
            default: 15
        -
          name: search
          in: query
          description: 'Tìm theo tên hoặc địa chỉ'
          schema:
            type: string
        -
          name: manager_id
          in: query
          description: 'Lọc theo ID quản lý'
          schema:
            type: integer
        -
          name: is_active
          in: query
          description: 'Lọc trạng thái (1: Active, 0: Inactive)'
          schema:
            type: boolean
      responses:
        200:
          description: 'Lấy danh sách thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      properties:
                        id:
                          type: integer
                          example: 1
                        uuid:
                          type: string
                          format: uuid
                        name:
                          type: string
                          example: 'Kho Hồ Chí Minh'
                        location:
                          type: string
                          example: 'Quận 7, TP.HCM'
                        is_active:
                          type: boolean
                          example: true
                        manager:
                          description: 'Thông tin quản lý (nếu có)'
                          properties:
                            id:
                              type: integer
                            name:
                              type: string
                          type: object
                      type: object
                  meta:
                    description: 'Thông tin phân trang (current_page, total...)'
                    type: object
                type: object
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Warehouses
      summary: 'Tạo Kho hàng mới'
      operationId: 7a4bf74f05ee4822b503198c09c3fbde
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
              properties:
                name:
                  type: string
                  example: 'Kho Hà Nội'
                location:
                  type: string
                  example: 'Cầu Giấy, Hà Nội'
                manager_id:
                  description: 'ID của User quản lý'
                  type: integer
                  example: 5
                is_active:
                  type: boolean
                  default: true
              type: object
      responses:
        201:
          description: 'Tạo thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    description: 'Object Warehouse vừa tạo'
                    type: object
                  message:
                    type: string
                    example: 'Warehouse created successfully'
                type: object
        409:
          description: 'Lỗi nghiệp vụ (Trùng tên)'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: false
                  error_code:
                    description: 'Mã lỗi: Warehouse name already exists'
                    type: integer
                    example: 409221
                  message:
                    type: string
                type: object
        422:
          description: 'Lỗi Validation (Validate Form)'
      security:
        -
          bearerAuth: []
  '/api/admin/warehouses/{uuid}':
    get:
      tags:
        - Warehouses
      summary: 'Xem chi tiết Kho hàng'
      operationId: b03b074849876928839921d9d01a0299
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      location:
                        type: string
                      manager:
                        description: 'User Model'
                        type: object
                    type: object
                type: object
        404:
          description: 'Không tìm thấy kho (Mã: 404220)'
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Warehouses
      summary: 'Cập nhật Kho hàng'
      operationId: 31acdd889b1cbdc67ad7816283facae3
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                location:
                  type: string
                manager_id:
                  type: integer
                is_active:
                  type: boolean
              type: object
      responses:
        200:
          description: 'Cập nhật thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 'Warehouse updated successfully'
                type: object
        409:
          description: 'Trùng tên kho (Mã: 409221)'
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Warehouses
      summary: 'Xóa Kho hàng'
      description: 'Lưu ý: Không thể xóa kho nếu trong kho vẫn còn hàng tồn (Quantity > 0).'
      operationId: 8d95d2ccd555a35663a510fc98421ab8
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: 'Xóa thành công'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: 'Warehouse deleted successfully'
                type: object
        409:
          description: 'Không thể xóa vì còn hàng tồn'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: false
                  error_code:
                    description: 'Mã lỗi: Cannot delete warehouse with stock'
                    type: integer
                    example: 409222
                  message:
                    type: string
                    example: 'Warehouse contains inventory items'
                type: object
      security:
        -
          bearerAuth: []
  /api/wishlist:
    get:
      tags:
        - Wishlist
      summary: 'Xem danh sách yêu thích của tôi'
      operationId: f9f4efe1efacbb6a21bbdd770216204d
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      properties:
                        uuid:
                          type: string
                        product:
                          description: 'Thông tin sản phẩm rút gọn'
                          type: object
                      type: object
                type: object
      security:
        -
          bearerAuth: []
  /api/wishlist/toggle:
    post:
      tags:
        - Wishlist
      summary: 'Thêm/Xóa sản phẩm khỏi Wishlist (Toggle)'
      description: 'Cơ chế Toggle: Nếu sản phẩm chưa có trong wishlist thì thêm vào, nếu có rồi thì xóa đi.'
      operationId: e631e4b3f323dda7444ab6b71238c012
      requestBody:
        content:
          application/json:
            schema:
              required:
                - product_uuid
              properties:
                product_uuid:
                  type: string
                  format: uuid
                  example: uuid-product-123
              type: object
      responses:
        200:
          description: 'Toggled Successfully'
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    properties:
                      status:
                        type: string
                        example: added
                      message:
                        type: string
                    type: object
                type: object
        404:
          description: 'Product Not Found (404160)'
      security:
        -
          bearerAuth: []
  '/api/wishlist/{uuid}':
    delete:
      tags:
        - Wishlist
      summary: 'Xóa 1 item khỏi Wishlist (Theo UUID Wishlist)'
      operationId: 1f87d39a59cbf1f71f040ea08381e163
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
components:
  schemas:
    CategoryResource:
      title: 'Category Resource'
      description: 'Cấu trúc dữ liệu trả về của Danh mục'
      properties:
        uuid:
          type: string
          format: uuid
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          example: 'Laptop Gaming'
        slug:
          type: string
          example: laptop-gaming
        description:
          type: string
          nullable: true
        parent_id:
          type: integer
          nullable: true
        is_active:
          type: boolean
          example: true
        children:
          type: array
          items:
            $ref: '#/components/schemas/CategoryResource'
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      type: object
    OrderResource:
      title: 'Order Resource'
      description: 'Thông tin chi tiết đơn hàng'
      properties:
        uuid:
          type: string
          format: uuid
        status:
          type: string
          example: pending
        payment_status:
          type: string
          example: unpaid
        shipping_status:
          type: string
          example: preparing
        notes:
          type: string
          nullable: true
        shipping_address:
          description: 'Snapshot địa chỉ tại thời điểm đặt'
          type: object
        currency_code:
          type: string
          example: VND
        total_amount:
          type: number
          format: float
          example: 500000
        total_formatted:
          type: string
          example: '500.000 ₫'
        voucher_discount:
          type: number
          format: float
          example: 0
        items:
          type: array
          items:
            properties:
              product_name:
                type: string
              quantity:
                type: integer
              unit_price_formatted:
                type: string
              subtotal_formatted:
                type: string
              sku:
                type: string
              image:
                type: string
                nullable: true
              attributes:
                type: object
                nullable: true
            type: object
        ordered_at:
          type: string
          format: date-time
      type: object
    ProductResource:
      title: 'Product Resource'
      description: 'Thông tin chi tiết sản phẩm'
      properties:
        uuid:
          type: string
          format: uuid
        name:
          type: string
          example: 'Áo Thun Polo'
        description:
          type: string
          nullable: true
        sku:
          type: string
          example: POLO-001
        currency_code:
          type: string
          example: VND
        price:
          type: number
          format: float
          example: 150000
        price_formatted:
          type: string
          example: '150.000 ₫'
        original_price:
          type: number
          format: float
          example: 200000
        original_price_formatted:
          type: string
          example: '200.000 ₫'
        price_range:
          type: string
          example: '150.000 ₫ - 200.000 ₫'
        flash_sale:
          properties:
            is_active:
              type: boolean
            campaign_name:
              type: string
            discount_percent:
              type: integer
            ends_at:
              type: string
              format: date-time
            seconds_remaining:
              type: integer
            ends_in:
              type: string
          type: object
          nullable: true
        has_variants:
          type: boolean
          example: true
        is_active:
          type: boolean
          example: true
        sold_count:
          type: integer
          example: 100
        rating_avg:
          type: number
          format: float
          example: 4.5
        rating_count:
          type: integer
          example: 50
        category:
          oneOf:
            -
              $ref: '#/components/schemas/CategoryResource'
          nullable: true
        images:
          type: array
          items:
            properties:
              uuid:
                type: string
              url:
                type: string
              is_primary:
                type: boolean
            type: object
        variants:
          type: array
          items:
            properties:
              uuid:
                type: string
              sku:
                type: string
              original_price:
                type: number
              original_price_formatted:
                type: string
              price:
                type: number
              price_formatted:
                type: string
              image:
                type: string
                nullable: true
              stock_quantity:
                type: integer
              attributes:
                type: array
                items:
                  properties:
                    attribute_name:
                      type: string
                    value:
                      type: string
                    code:
                      type: string
                  type: object
            type: object
        created_at:
          type: string
          format: date-time
      type: object
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
tags:
  -
    name: Address
    description: 'API quản lý sổ địa chỉ giao hàng'
  -
    name: Auth
    description: 'Xác thực & Phân quyền'
  -
    name: Cart
    description: 'API Giỏ hàng & Mua sắm (Yêu cầu Token)'
  -
    name: 'Cart Voucher'
    description: 'Quản lý mã giảm giá trong giỏ hàng'
  -
    name: Categories
    description: 'API quản lý Danh mục sản phẩm (Hỗ trợ cấu trúc cây)'
  -
    name: Collections
    description: 'API quản lý Bộ sưu tập'
  -
    name: Currencies
    description: 'API quản lý Tiền tệ'
  -
    name: Dashboard
    description: 'Báo cáo thống kê hệ thống (Admin Only)'
  -
    name: Inventory
    description: 'Quản lý Tồn kho (Admin/Staff)'
  -
    name: 'System Logs'
    description: 'Quản lý nhật ký hoạt động hệ thống (Audit & Error Logs)'
  -
    name: Media
    description: 'API quản lý File/Ảnh hệ thống'
  -
    name: Notifications
    description: 'API quản lý thông báo cá nhân'
  -
    name: Orders
    description: 'API quản lý Đơn hàng & Thanh toán'
  -
    name: Payments
    description: 'API quản lý Thanh toán'
  -
    name: Permissions
    description: 'Quản lý danh sách quyền hạn'
  -
    name: 'Product Attributes'
    description: 'Quản lý thuộc tính sản phẩm (Màu sắc, Kích thước...)'
  -
    name: Products
    description: 'API quản lý sản phẩm'
  -
    name: 'Product Images'
    description: 'Thêm/Xóa ảnh phụ cho sản phẩm'
  -
    name: Promotions
    description: 'Quản lý chương trình khuyến mãi, giảm giá (BigInteger Support)'
  -
    name: Reviews
    description: 'API Đánh giá & Nhận xét sản phẩm'
  -
    name: Roles
    description: 'Quản lý vai trò & Phân quyền (RBAC)'
  -
    name: Shipping
    description: 'API quản lý Vận chuyển (Admin/Shipper)'
  -
    name: Users
    description: 'API quản lý người dùng'
  -
    name: Vouchers
    description: 'Quản lý Mã giảm giá (Admin)'
  -
    name: Warehouses
    description: 'API quản lý Kho hàng (Admin Only)'
  -
    name: Wishlist
    description: 'API quản lý danh sách yêu thích'
security:
  -
    bearerAuth: []
