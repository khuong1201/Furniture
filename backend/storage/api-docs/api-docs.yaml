openapi: 3.0.0
info:
  title: 'E-commerce Modular API'
  description: 'Tài liệu API hệ thống E-commerce (Sử dụng PHP 8 Attributes)'
  contact:
    email: admin@system.com
  version: 1.0.0
servers:
  -
    url: /api
    description: 'API Server'
paths:
  /addresses:
    get:
      tags:
        - Address
      summary: 'Lấy danh sách địa chỉ của tôi'
      operationId: daee3e5ef82ac6db0e154ac5a54a74a1
      responses:
        200:
          description: Success
        401:
          description: Unauthenticated
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Address
      summary: 'Thêm địa chỉ mới'
      operationId: 518a68f89c5990fb8f601ccca9fc8da8
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - full_name
                - phone
                - province
                - district
                - ward
                - street
              properties:
                full_name:
                  type: string
                  example: 'Nguyen Van A'
                phone:
                  type: string
                  example: '0901234567'
                province:
                  type: string
                district:
                  type: string
                ward:
                  type: string
                street:
                  type: string
                is_default:
                  type: boolean
                  example: false
              type: object
      responses:
        201:
          description: Created
        422:
          description: 'Validation Error'
      security:
        -
          bearerAuth: []
  '/addresses/{uuid}':
    get:
      tags:
        - Address
      summary: 'Xem chi tiết địa chỉ'
      operationId: ed5d48599f4e65459daf636c6948c6fd
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
        403:
          description: Forbidden
        404:
          description: 'Not Found'
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Address
      summary: 'Cập nhật địa chỉ'
      operationId: 012e1a8fc981036ab80e2f094b94f859
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                full_name:
                  type: string
                phone:
                  type: string
                is_default:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
        403:
          description: Forbidden
        404:
          description: 'Not Found'
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Address
      summary: 'Xóa địa chỉ'
      operationId: 88f6862b99dd137b32657d71a8bf7713
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
        403:
          description: Forbidden
        404:
          description: 'Not Found'
      security:
        -
          bearerAuth: []
  /auth/register:
    post:
      tags:
        - Auth
      summary: 'Đăng ký tài khoản mới'
      description: 'Tạo tài khoản và gửi OTP qua email. Chưa trả về Token đăng nhập ngay.'
      operationId: ec3aaa6aae353212c6d4173ea25748b2
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - email
                - password
                - password_confirmation
              properties:
                name:
                  type: string
                  example: 'Nguyen Van A'
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  example: password123
                password_confirmation:
                  type: string
                  example: password123
                device_name:
                  type: string
                  example: iphone_13
                  nullable: true
              type: object
      responses:
        201:
          description: 'Đăng ký thành công, chờ xác thực OTP'
          content:
            application/json:
              schema:
                allOf:
                  -
                    $ref: '#/components/schemas/ApiResponse'
                  -
                    properties:
                      data:
                        properties:
                          message:
                            type: string
                            example: 'Please check your email...'
                          require_verification:
                            type: boolean
                            example: true
                        type: object
                    type: object
        422:
          description: 'Lỗi Validation (Email trùng, mật khẩu yếu...)'
  /auth/verify:
    post:
      tags:
        - Auth
      summary: 'Xác thực OTP'
      description: 'Nhập Email và mã OTP 6 số để kích hoạt tài khoản và lấy Token.'
      operationId: 605fe921083e6ba834020a404bfd57d9
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - otp
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                otp:
                  type: string
                  example: '123456'
              type: object
      responses:
        200:
          description: 'Xác thực thành công, trả về Token'
          content:
            application/json:
              schema:
                properties:
                  access_token:
                    type: string
                    example: eyJ0eXAi...
                  refresh_token:
                    type: string
                    example: def456...
                  expires_in:
                    type: integer
                    example: 3600
                  user:
                    type: object
                type: object
        400:
          description: 'Sai OTP hoặc OTP hết hạn'
  /auth/login:
    post:
      tags:
        - Auth
      summary: 'Đăng nhập'
      operationId: 3112494b62ec1e0e762028e958cef77b
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: admin@system.com
                password:
                  type: string
                  format: password
                  example: '123456'
                device_name:
                  type: string
                  example: web_chrome
              type: object
      responses:
        200:
          description: 'Login thành công'
          content:
            application/json:
              schema:
                allOf:
                  -
                    $ref: '#/components/schemas/ApiResponse'
                  -
                    properties:
                      data:
                        properties:
                          access_token:
                            type: string
                          refresh_token:
                            type: string
                          permissions:
                            type: array
                            items:
                              type: string
                        type: object
                    type: object
        401:
          description: 'Sai tài khoản hoặc mật khẩu'
  /auth/refresh:
    post:
      tags:
        - Auth
      summary: 'Làm mới Token (Refresh Token)'
      operationId: 54138472c166d1a1f706bb95f3eeddb4
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - refresh_token
              properties:
                refresh_token:
                  type: string
                  example: abcdef123456...
              type: object
      responses:
        200:
          description: 'Token mới được cấp'
          content:
            application/json:
              schema:
                allOf:
                  -
                    $ref: '#/components/schemas/ApiResponse'
                  -
                    properties:
                      data:
                        properties:
                          access_token:
                            type: string
                          refresh_token:
                            type: string
                        type: object
                    type: object
        401:
          description: 'Refresh Token không hợp lệ hoặc hết hạn'
  /auth/logout:
    post:
      tags:
        - Auth
      summary: 'Đăng xuất'
      description: 'Thu hồi Refresh Token hiện tại.'
      operationId: d5ba94626f1419f9a308da15ed09a40e
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - refresh_token
              properties:
                refresh_token:
                  type: string
              type: object
      responses:
        200:
          description: 'Đăng xuất thành công'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
      security:
        -
          bearerAuth: []
  /carts:
    get:
      tags:
        - Cart
      summary: 'Xem giỏ hàng của tôi'
      operationId: 09c3433b5866644b5e6d84c885aa4f44
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Cart
      summary: 'Thêm sản phẩm'
      operationId: f54d6540bce234d581cf30b75f9cc7f2
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - product_uuid
                - quantity
              properties:
                product_uuid:
                  type: string
                  format: uuid
                quantity:
                  type: integer
                  minimum: 1
              type: object
      responses:
        200:
          description: Added
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Cart
      summary: 'Làm trống giỏ hàng'
      operationId: b7f118663b800d671b1d4923c73dfb3f
      responses:
        200:
          description: Cleared
      security:
        -
          bearerAuth: []
  '/carts/{itemUuid}':
    put:
      tags:
        - Cart
      summary: 'Cập nhật số lượng item'
      operationId: 3bdd0b23b2e8c4ca46213f04b3504c0d
      parameters:
        -
          name: itemUuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                quantity:
                  type: integer
                  minimum: 0
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
  '/carts/{uuid}':
    delete:
      tags:
        - Cart
      summary: 'Xóa item'
      operationId: 919339c6a2f66c87e8da185e0e12843c
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /public/categories:
    get:
      tags:
        - Categories
      summary: 'Xem danh sách danh mục (Public)'
      operationId: bebab8114cd078f494482e66e6892b3e
      parameters:
        -
          name: tree
          in: query
          schema:
            type: boolean
        -
          name: page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
  /admin/categories:
    post:
      tags:
        - Categories
      summary: 'Tạo danh mục mới (Admin)'
      operationId: 18403f5d3dc85a743d7b64c6823b6569
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - slug
              properties:
                name:
                  type: string
                slug:
                  type: string
                parent_uuid:
                  type: string
                  format: uuid
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/admin/categories/{uuid}':
    put:
      tags:
        - Categories
      summary: 'Cập nhật danh mục (Admin)'
      operationId: 896494ab0c8a816b2a1a8438f1582443
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                parent_uuid:
                  type: string
                  format: uuid
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Categories
      summary: 'Xóa danh mục (Admin)'
      operationId: 2e7a41d97a8a554f659f94b5ea9800c2
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  '/public/categories/{uuid}':
    get:
      tags:
        - Categories
      summary: 'Xem chi tiết danh mục (Public)'
      operationId: d49a3ecc3083c299e227cb404121eb2c
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
  /admin/inventories:
    get:
      tags:
        - Inventory
      summary: 'Xem danh sách tồn kho'
      operationId: 60f3767a8279f38400634bcec6ff93a0
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
        -
          name: product_uuid
          in: query
          description: 'Filter theo UUID sản phẩm'
          required: false
          schema:
            type: string
            format: uuid
        -
          name: warehouse_uuid
          in: query
          description: 'Filter theo UUID kho'
          required: false
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: 'Successful operation'
        403:
          description: 'Forbidden (Not Admin)'
      security:
        -
          bearerAuth: []
  /admin/inventories/upsert:
    post:
      tags:
        - Inventory
      summary: 'Thêm hoặc Cập nhật Tồn kho (Upsert)'
      description: 'Tạo record tồn kho mới hoặc ghi đè (overwrite) số lượng nếu đã tồn tại.'
      operationId: 109e5267df7045ba5112570cb42f07a3
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - product_uuid
                - warehouse_uuid
                - quantity
              properties:
                product_uuid:
                  type: string
                  format: uuid
                warehouse_uuid:
                  type: string
                  format: uuid
                quantity:
                  description: 'Số lượng tồn kho mới (overwrite)'
                  type: integer
                min_threshold:
                  description: 'Ngưỡng cảnh báo thấp nhất'
                  type: integer
                  nullable: true
              type: object
      responses:
        200:
          description: 'Inventory updated successfully'
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
  '/admin/inventories/{productUuid}/{warehouseUuid}/adjust':
    patch:
      tags:
        - Inventory
      summary: 'Điều chỉnh số lượng tồn kho (Tăng/Giảm Delta)'
      description: 'Sử dụng để nhập kho (delta > 0) hoặc trừ kho thủ công (delta < 0).'
      operationId: b649baf17cf0e8e3e443180f3cd41952
      parameters:
        -
          name: productUuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
        -
          name: warehouseUuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - delta
              properties:
                delta:
                  description: 'Giá trị thay đổi (có thể âm hoặc dương)'
                  type: integer
              type: object
      responses:
        200:
          description: 'Stock adjusted successfully'
        403:
          description: Forbidden
        422:
          description: 'Insufficient stock or Validation error'
      security:
        -
          bearerAuth: []
  /admin/logs:
    get:
      tags:
        - 'System Logs'
      summary: 'Xem danh sách Log'
      operationId: 682c7487c29b68fd9dbbd61477696034
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
        -
          name: level
          in: query
          description: 'error, info, warning...'
          schema:
            type: string
      responses:
        200:
          description: Success
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
  '/admin/logs/{uuid}':
    get:
      tags:
        - 'System Logs'
      summary: 'Xem chi tiết Log'
      operationId: c7c9b88cabffbd44d6ef387e741c7f4d
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
  /notifications:
    get:
      tags:
        - Notifications
      summary: 'Lấy danh sách thông báo'
      operationId: 945df4ec12a434066af5174c3cfcdd73
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
  '/notifications/{uuid}/read':
    patch:
      tags:
        - Notifications
      summary: 'Đánh dấu đã đọc 1 thông báo'
      operationId: 72a26746caef2751340b557fb934f6f1
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: 'Marked as read'
      security:
        -
          bearerAuth: []
  /notifications/read-all:
    post:
      tags:
        - Notifications
      summary: 'Đánh dấu đã đọc tất cả'
      operationId: f421c6c894f390ac43d4185094f065da
      responses:
        200:
          description: 'All read'
      security:
        -
          bearerAuth: []
  '/notifications/{uuid}':
    delete:
      tags:
        - Notifications
      summary: 'Xóa thông báo'
      operationId: ad9d090bf69c03a9630d37119929ff1e
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /orders:
    get:
      tags:
        - Orders
      summary: 'Xem danh sách đơn hàng'
      operationId: 4e011b1dd08685b7386fdce144bf8f7b
      parameters:
        -
          name: status
          in: query
          schema:
            type: string
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Orders
      summary: 'Tạo đơn hàng mới (Admin/Staff)'
      operationId: 6dc386d376574a4249e0ddb0cbcb2359
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - address_id
                - items
              properties:
                address_id:
                  type: integer
                items:
                  type: array
                  items:
                    type: object
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  /orders/checkout:
    post:
      tags:
        - Orders
      summary: 'Đặt hàng từ giỏ hàng (User)'
      operationId: d214f391766889d74685377a5f161aaa
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - address_id
              properties:
                address_id:
                  type: integer
                notes:
                  type: string
              type: object
      responses:
        201:
          description: 'Order placed'
      security:
        -
          bearerAuth: []
  '/orders/{uuid}':
    get:
      tags:
        - Orders
      summary: 'Xem chi tiết đơn hàng'
      operationId: f15bfcfbe0db066bb7ed1468987c7689
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
  '/orders/{uuid}/cancel':
    post:
      tags:
        - Orders
      summary: 'Hủy đơn hàng'
      operationId: 68403667692512eb7b881131b53ff0d5
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Cancelled
      security:
        -
          bearerAuth: []
  /payments:
    get:
      tags:
        - Payments
      summary: 'Lịch sử giao dịch (User xem của mình, Admin xem tất cả)'
      operationId: d2cb9e33536e2a3d10ea0e21861315fd
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: status
          in: query
          schema:
            type: string
            enum:
              - pending
              - completed
              - failed
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Payments
      summary: 'Tạo yêu cầu thanh toán (Thường dùng khi Retry payment)'
      operationId: 919d9707a0f0b62ff9bb94318680424b
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - order_uuid
                - payment_method
              properties:
                order_uuid:
                  type: string
                  format: uuid
                payment_method:
                  type: string
                  enum:
                    - cod
                    - banking
                    - momo
                    - stripe
              type: object
      responses:
        200:
          description: 'Payment Initiated (Return payment URL)'
      security:
        -
          bearerAuth: []
  '/payments/{uuid}':
    get:
      tags:
        - Payments
      summary: 'Xem chi tiết giao dịch'
      operationId: 2a56147aab532093b44a043f87eaa1d9
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Payments
      summary: 'Cập nhật trạng thái thanh toán (Admin Only - Manual)'
      operationId: 3e17e5a5f80fdbfe49a6536073361ca6
      requestBody:
        content:
          application/json:
            schema:
              properties:
                status:
                  type: string
                  enum:
                    - paid
                    - failed
                    - refunded
                transaction_id:
                  type: string
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
  '/payments/callback/{provider}':
    post:
      tags:
        - Payments
      summary: 'Webhook nhận kết quả thanh toán (Public)'
      description: 'API này dành cho Payment Gateway (Momo, Stripe, VNPAY) gọi lại. Không cần Token.'
      operationId: 62edbc63f5e9271506b563cdbf3d58b6
      parameters:
        -
          name: provider
          in: path
          required: true
          schema:
            type: string
            enum:
              - momo
              - vnpay
              - stripe
      responses:
        200:
          description: 'IPN Received'
  /public/products:
    get:
      tags:
        - Products
      summary: 'Lấy danh sách sản phẩm (Public - Chỉ hiện Active)'
      operationId: f089d65f31dc82c6e3b80e06c542463f
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
        -
          name: category_uuid
          in: query
          schema:
            type: string
        -
          name: search
          in: query
          schema:
            type: string
      responses:
        200:
          description: Success
  '/public/products/{uuid}':
    get:
      tags:
        - Products
      summary: 'Xem chi tiết sản phẩm (Public)'
      operationId: b96e795a251da1d56654b459cec75057
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
        404:
          description: 'Not found'
  /admin/products:
    get:
      tags:
        - Products
      summary: 'Danh sách sản phẩm (Admin - Xem cả ẩn)'
      operationId: 90b09429681f249365da59a28870cfb5
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Products
      summary: 'Tạo sản phẩm mới (Admin)'
      operationId: 6cac846a61b72104adff1ee91bd8f69b
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - sku
                - price
                - category_uuid
              properties:
                name:
                  type: string
                category_uuid:
                  type: string
                  format: uuid
                price:
                  type: number
                sku:
                  type: string
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/admin/products/{uuid}':
    put:
      tags:
        - Products
      summary: 'Cập nhật sản phẩm (Admin)'
      operationId: ff7d7b298b0d62cf0b4503308d3af809
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                is_active:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Products
      summary: 'Xóa sản phẩm (Admin)'
      operationId: 997ef24991477503409e3edfd16a1553
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  '/admin/products/{uuid}/images':
    post:
      tags:
        - 'Product Images'
      summary: 'Upload ảnh cho sản phẩm'
      operationId: 34871052eb1f635905f8fcb6c557c603
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          multipart/form-data:
            schema:
              properties:
                image:
                  type: string
                  format: binary
                is_primary:
                  type: boolean
              type: object
      responses:
        201:
          description: Uploaded
      security:
        -
          bearerAuth: []
  '/admin/product-images/{uuid}':
    delete:
      tags:
        - 'Product Images'
      summary: 'Xóa ảnh sản phẩm'
      operationId: f7978e2e0e8a4fb631fc0685898fe068
      parameters:
        -
          name: uuid
          in: path
          description: 'UUID của Image'
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /admin/promotions:
    get:
      tags:
        - Promotions
      summary: 'Lấy danh sách khuyến mãi'
      operationId: 815501f4796ccd641aaf926b1f9bdaa4
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
        -
          name: search
          in: query
          schema:
            type: string
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Promotions
      summary: 'Tạo mới khuyến mãi'
      operationId: 8280d34b6047f93dd7aefad48126a922
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - type
                - value
                - start_date
                - end_date
              properties:
                name:
                  type: string
                type:
                  type: string
                  enum:
                    - percentage
                    - fixed
                value:
                  type: number
                start_date:
                  type: string
                  format: date-time
                end_date:
                  type: string
                  format: date-time
                product_ids:
                  type: array
                  items:
                    type: integer
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/admin/promotions/{uuid}':
    get:
      tags:
        - Promotions
      summary: 'Xem chi tiết khuyến mãi'
      operationId: 90f53a56a3e227f3c48e96cfebcc29ed
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Promotions
      summary: 'Cập nhật khuyến mãi'
      operationId: bad7f0f192a9b0095bc1390f390d90a6
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                status:
                  type: boolean
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Promotions
      summary: 'Xóa khuyến mãi'
      operationId: 2103693e1ba3059dba187ed87a4db80a
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /reviews:
    get:
      tags:
        - Reviews
      summary: 'Xem danh sách đánh giá'
      operationId: 537151cfc85509ee58521c13903a8fe3
      parameters:
        -
          name: product_uuid
          in: query
          schema:
            type: string
            format: uuid
        -
          name: page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
    post:
      tags:
        - Reviews
      summary: 'Tạo đánh giá mới'
      operationId: fb71a3b9781fdda4cb83976b10b69418
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - product_uuid
                - rating
                - content
              properties:
                product_uuid:
                  type: string
                  format: uuid
                rating:
                  type: integer
                  maximum: 5
                  minimum: 1
                content:
                  type: string
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/reviews/{uuid}':
    put:
      tags:
        - Reviews
      summary: 'Cập nhật đánh giá'
      operationId: a15331cbca679ed871fedeae4de9f987
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                rating:
                  type: integer
                content:
                  type: string
              type: object
      responses:
        200:
          description: Updated
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Reviews
      summary: 'Xóa đánh giá'
      operationId: 4620691994824d42f0925ef738ba349f
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /admin/users:
    get:
      tags:
        - 'Users (Admin & Self)'
      summary: 'Xem danh sách người dùng (Admin)'
      operationId: ebdb37e0aca7226f6630d2b6f1de6946
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
    post:
      tags:
        - 'Users (Admin & Self)'
      summary: 'Tạo người dùng mới (Admin)'
      operationId: 88de0372c28d80c0be353a8bcce497e7
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - email
                - password
              properties:
                name:
                  type: string
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
                roles:
                  type: array
                  items:
                    type: string
              type: object
      responses:
        201:
          description: Created
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
  '/admin/users/{uuid}':
    get:
      tags:
        - 'Users (Admin & Self)'
      summary: 'Xem chi tiết người dùng'
      operationId: 0c8ff92257b9f5d7e945b3a8ee6edad6
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
        403:
          description: 'Forbidden (Not Owner/Admin)'
        404:
          description: 'Not Found'
      security:
        -
          bearerAuth: []
    put:
      tags:
        - 'Users (Admin & Self)'
      summary: 'Cập nhật thông tin'
      operationId: 2d7ab603a4edd1e1187a11eefe3bb856
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                roles:
                  type: array
                  items:
                    type: string
              type: object
      responses:
        200:
          description: Updated
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - 'Users (Admin & Self)'
      summary: 'Xóa người dùng (Admin)'
      operationId: 13d69b0c1b0fb851225843080eac0c32
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
  /profile:
    get:
      tags:
        - 'Users (Admin & Self)'
      summary: 'Xem thông tin người dùng hiện tại'
      operationId: 02215cf763020c25fc4b65d33aa9cb9f
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                properties:
                  success:
                    type: boolean
                  data:
                    properties:
                      uuid:
                        type: string
                      name:
                        type: string
                      email:
                        type: string
                      roles:
                        type: array
                        items:
                          type: string
                    type: object
                type: object
        404:
          description: 'User not found'
      security:
        -
          bearerAuth: []
  /admin/warehouses:
    get:
      tags:
        - Warehouses
      summary: 'Xem danh sách Kho hàng (Admin)'
      operationId: 6320efc130774dac5aa7c13dafd0ae2b
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
        -
          name: per_page
          in: query
          schema:
            type: integer
      responses:
        200:
          description: Success
        403:
          description: Forbidden
      security:
        -
          bearerAuth: []
    post:
      tags:
        - Warehouses
      summary: 'Tạo Kho hàng mới (Admin)'
      operationId: 1a7c4e3a6a3f36dc8ca5a75d54dff1db
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - name
                - code
              properties:
                name:
                  type: string
                  example: 'Kho Trung Tâm'
                code:
                  type: string
                  example: NB01
                address:
                  type: string
              type: object
      responses:
        201:
          description: Created
      security:
        -
          bearerAuth: []
  '/admin/warehouses/{uuid}':
    get:
      tags:
        - Warehouses
      summary: 'Xem chi tiết Kho hàng'
      operationId: 6e939c49cfde0998a14c14a181295f74
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Success
        404:
          description: 'Not found'
      security:
        -
          bearerAuth: []
    put:
      tags:
        - Warehouses
      summary: 'Cập nhật Kho hàng'
      operationId: 9ff30ab1a0694145ef8eb264c224255f
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              properties:
                name:
                  type: string
                address:
                  type: string
              type: object
      responses:
        200:
          description: Updated
      security:
        -
          bearerAuth: []
    delete:
      tags:
        - Warehouses
      summary: 'Xóa Kho hàng'
      operationId: d20e7ee47b740f732b6fbdb123213f44
      parameters:
        -
          name: uuid
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: Deleted
      security:
        -
          bearerAuth: []
components:
  schemas:
    ApiResponse:
      title: 'Standard Response'
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Success
        data:
          type: object
          nullable: true
      type: object
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
tags:
  -
    name: Address
    description: 'API quản lý địa chỉ giao hàng của người dùng'
  -
    name: Auth
    description: 'Quản lý xác thực người dùng (Login, Register, OTP...)'
  -
    name: Cart
    description: 'API quản lý Giỏ hàng'
  -
    name: Categories
    description: 'API quản lý Danh mục sản phẩm (Public xem, Admin quản lý)'
  -
    name: Inventory
    description: 'API quản lý Tồn kho (Admin Only)'
  -
    name: 'System Logs'
    description: 'API xem nhật ký hệ thống (Admin Only)'
  -
    name: Notifications
    description: 'API quản lý thông báo (User)'
  -
    name: Orders
    description: 'API quản lý Đơn hàng'
  -
    name: Payments
    description: 'API quản lý Thanh toán & Giao dịch'
  -
    name: Products
    description: 'API quản lý sản phẩm (Public xem, Admin quản lý)'
  -
    name: 'Product Images'
    description: 'API quản lý ảnh sản phẩm (Admin)'
  -
    name: Promotions
    description: 'Quản lý chương trình khuyến mãi, giảm giá'
  -
    name: Reviews
    description: 'API quản lý Đánh giá sản phẩm'
  -
    name: 'Users (Admin & Self)'
    description: 'API quản lý người dùng'
  -
    name: Warehouses
    description: 'API quản lý Kho hàng (Admin Only)'
security:
  -
    bearerAuth: []
